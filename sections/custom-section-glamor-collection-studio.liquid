{{ 'section-glamor-collection-studio.css' | asset_url | stylesheet_tag }}

<div class="custom-section-glamor-collection" data-section-id="{{ section.id }}">
  {%- comment -%} Wrapper with fixed/viewport height - 100vw for full width background {%- endcomment -%}
  <div class="custom-section-glamor-collection__wrapper">

    {%- comment -%} Background Image - Full Width (100vw) {%- endcomment -%}
    {% if section.settings.background_image != blank %}
      <div class="custom-section-glamor-collection__background">
        <img
          src="{{ section.settings.background_image | image_url: width: 1920 }}"
          srcset="
            {{ section.settings.background_image | image_url: width: 768 }} 768w,
            {{ section.settings.background_image | image_url: width: 1440 }} 1440w,
            {{ section.settings.background_image | image_url: width: 1920 }} 1920w
          "
          sizes="100vw"
          alt="{{ section.settings.background_image.alt | default: 'Glamour Collection Background' | escape }}"
          loading="lazy"
          class="custom-section-glamor-collection__background-image"
        >
      </div>
    {% else %}
      {%- comment -%} Placeholder when no background image is uploaded {%- endcomment -%}
      <div class="custom-section-glamor-collection__background custom-section-glamor-collection__background--placeholder">
        <div class="custom-section-glamor-collection__placeholder-content">
          <p>Add a background image in section settings</p>
        </div>
      </div>
    {% endif %}

    {%- comment -%} Content Container - Max Width 1440px Centered {%- endcomment -%}
    <div class="custom-section-glamor-collection__content">

      {%- comment -%} Headline Content {%- endcomment -%}
      <div class="custom-section-glamor-collection__headline">
      {% if section.settings.heading_text != blank %}
        <h2 class="custom-section-glamor-collection__headline-text">
          {{ section.settings.heading_text }}
        </h2>
      {% endif %}

      {% if section.settings.subtitle_text != blank %}
        <p class="custom-section-glamor-collection__subtitle">
          {{ section.settings.subtitle_text }}
        </p>
      {% endif %}
    </div>

    {%- comment -%} Product Cards - Desktop Absolute Layout {%- endcomment -%}
    {% if section.blocks.size > 0 %}
      <div class="custom-section-glamor-collection__cards custom-section-glamor-collection__cards--desktop">
        {% for block in section.blocks %}
          {%- assign card_index = forloop.index -%}

          {% if block.settings.product_image != blank %}
            <div
              class="custom-section-glamor-collection__card custom-section-glamor-collection__card--{{ card_index }}"
              {{ block.shopify_attributes }}
              data-card-index="{{ card_index }}"
            >
              <div class="custom-section-glamor-collection__card-overlay">
                {%- comment -%} Product Image {%- endcomment -%}
                <img
                  src="{{ block.settings.product_image | image_url: width: 600 }}"
                  srcset="
                    {{ block.settings.product_image | image_url: width: 400 }} 400w,
                    {{ block.settings.product_image | image_url: width: 600 }} 600w,
                    {{ block.settings.product_image | image_url: width: 800 }} 800w
                  "
                  sizes="(max-width: 767px) 50vw, (max-width: 1024px) 25vw, 400px"
                  alt="{{ block.settings.product_name | default: 'Product' | escape }}"
                  loading="lazy"
                  class="custom-section-glamor-collection__card-image"
                >

                {%- comment -%} Product Name {%- endcomment -%}
                {% if block.settings.product_name != blank %}
                  <p class="custom-section-glamor-collection__card-name">
                    {{ block.settings.product_name | truncate: 30 }}
                  </p>
                {% endif %}

                {%- comment -%} CTA Link {%- endcomment -%}
                {% if block.settings.cta_text != blank %}
                  <a
                    href="{{ block.settings.cta_link | default: '#' }}"
                    class="custom-section-glamor-collection__card-cta"
                  >
                    {{ block.settings.cta_text | truncate: 20 }}
                  </a>
                {% endif %}
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>

      {%- comment -%} Product Cards - Tablet/Mobile Grid Layout {%- endcomment -%}
      <div class="custom-section-glamor-collection__cards custom-section-glamor-collection__cards--responsive">
        {% for block in section.blocks %}
          {% if block.settings.product_image != blank %}
            <div
              class="custom-section-glamor-collection__card"
              {{ block.shopify_attributes }}
            >
              <div class="custom-section-glamor-collection__card-overlay">
                {%- comment -%} Product Image {%- endcomment -%}
                <img
                  src="{{ block.settings.product_image | image_url: width: 600 }}"
                  alt="{{ block.settings.product_name | default: 'Product' | escape }}"
                  loading="lazy"
                  class="custom-section-glamor-collection__card-image"
                >

                {%- comment -%} Product Name {%- endcomment -%}
                {% if block.settings.product_name != blank %}
                  <p class="custom-section-glamor-collection__card-name">
                    {{ block.settings.product_name | truncate: 30 }}
                  </p>
                {% endif %}

                {%- comment -%} CTA Link {%- endcomment -%}
                {% if block.settings.cta_text != blank %}
                  <a
                    href="{{ block.settings.cta_link | default: '#' }}"
                    class="custom-section-glamor-collection__card-cta"
                  >
                    {{ block.settings.cta_text | truncate: 20 }}
                  </a>
                {% endif %}
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

    </div>
    {%- comment -%} End Content Container {%- endcomment -%}
  </div>
</div>

<script src="{{ 'section-glamor-collection-studio.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Glamor Collection Studio",
  "tag": "section",
  "class": "section-glamor-collection",
  "settings": [
    {
      "type": "header",
      "content": "Background Image"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image",
      "info": "Lifestyle photograph. Recommended: 1920×1528px for desktop."
    },
    {
      "type": "header",
      "content": "Headline Content"
    },
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading Text",
      "default": "Glamour",
      "info": "Large script heading. Font is hardcoded (Bickham Script Pro)."
    },
    {
      "type": "text",
      "id": "subtitle_text",
      "label": "Subtitle Text",
      "default": "is a condition, not a commodity.",
      "info": "Subtitle text below heading."
    }
  ],
  "blocks": [
    {
      "type": "product_card",
      "name": "Product Card",
      "limit": 4,
      "settings": [
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Product Image",
          "info": "Required: 1:1 square ratio. Recommended: 600×600px minimum."
        },
        {
          "type": "text",
          "id": "product_name",
          "label": "Product Name",
          "default": "Product Name",
          "info": "Recommended: 25-30 characters. Text will overflow with ellipsis if longer."
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "CTA Text",
          "default": "View",
          "info": "Recommended: 15-20 characters. Text will overflow with ellipsis if longer."
        },
        {
          "type": "url",
          "id": "cta_link",
          "label": "CTA Link",
          "info": "Destination URL when CTA is clicked."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Glamor Collection - Studio",
      "blocks": []
    }
  ]
}
{% endschema %}
