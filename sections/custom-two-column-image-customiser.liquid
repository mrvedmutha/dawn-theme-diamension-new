{% comment %}
  Section: Two-Column Image Customiser
  Purpose: Split-screen section for custom jewelry appointment booking
  Author: Wings Design Team
  Version: 1.0
  Figma Node: 12-7504
{% endcomment %}

{{ 'section-two-column-image-customiser.css' | asset_url | stylesheet_tag }}
{{ 'section-two-column-image-customiser-modal.css' | asset_url | stylesheet_tag }}
<script src="{{ 'section-two-column-image-customiser-modal.js' | asset_url }}" defer></script>

{% liquid
  assign section_id = section.id
  assign heading = section.settings.heading
  assign description = section.settings.description
  assign button_1_text = section.settings.button_1_text
  assign button_1_link = section.settings.button_1_link
  assign button_2_text = section.settings.button_2_text
  assign button_2_link = section.settings.button_2_link
  assign image = section.settings.image
  assign background_color = section.settings.background_color
  assign whatsapp_number = section.settings.whatsapp_number
  assign success_message = section.settings.success_message
  assign error_message = section.settings.error_message
%}

<div
  class="custom-section-two-column-image-customiser"
  data-section-id="{{ section_id }}"
  style="--bg-color: {{ background_color }};"
>
  <div class="custom-section-two-column-image-customiser__wrapper">
    {% comment %} Content Section {% endcomment %}
    <div class="custom-section-two-column-image-customiser__content">
      <div class="custom-section-two-column-image-customiser__content-inner">
        {% comment %} Heading {% endcomment %}
        {% if heading != blank %}
          <h2 class="custom-section-two-column-image-customiser__heading">
            {{ heading | escape }}
          </h2>
        {% endif %}

        {% comment %} Description {% endcomment %}
        {% if description != blank %}
          <div class="custom-section-two-column-image-customiser__description">
            {{ description }}
          </div>
        {% endif %}

        {% comment %} CTA Buttons {% endcomment %}
        {% if button_1_text != blank or button_2_text != blank %}
          <div class="custom-section-two-column-image-customiser__buttons">
            {% if button_1_text != blank %}
              <button
                type="button"
                class="custom-section-two-column-image-customiser__button custom-section-two-column-image-customiser__button--primary"
              >
                {{ button_1_text | escape }}
              </button>
            {% endif %}

            {% if button_2_text != blank %}
              <button
                type="button"
                class="custom-section-two-column-image-customiser__button custom-section-two-column-image-customiser__button--secondary"
              >
                {{ button_2_text | escape }}
              </button>
            {% endif %}
          </div>
        {% endif %}
      </div>
    </div>

    {% comment %} Image Section {% endcomment %}
    <div class="custom-section-two-column-image-customiser__image-wrapper">
      {% if image != blank %}
        <img
          src="{{ image | image_url: width: 1920 }}"
          srcset="
            {{ image | image_url: width: 750 }} 750w,
            {{ image | image_url: width: 1000 }} 1000w,
            {{ image | image_url: width: 1500 }} 1500w,
            {{ image | image_url: width: 1920 }} 1920w
          "
          sizes="(max-width: 767px) 100vw, 50vw"
          width="{{ image.width }}"
          height="{{ image.height }}"
          alt="{{ image.alt | default: heading | escape }}"
          loading="lazy"
          class="custom-section-two-column-image-customiser__image"
        >
      {% else %}
        {% comment %} Fallback placeholder if no image {% endcomment %}
        <div class="custom-section-two-column-image-customiser__placeholder"></div>
      {% endif %}
    </div>
  </div>

  {% comment %} Virtual Appointment Modal {% endcomment %}
  <div
    id="modal-virtual-{{ section_id }}"
    class="modal-overlay"
    data-whatsapp-number="{{ whatsapp_number }}"
  >
    <div class="modal-container">
      <div class="modal-header">
        <div class="modal-close-wrapper">
          <button type="button" class="modal-close" aria-label="Close modal">&times;</button>
        </div>
        <h3 class="modal-title">Virtual Appointment</h3>
      </div>
      <div class="modal-body">
        {% comment %} Error Message {% endcomment %}
        <div class="modal-error">
          <p class="modal-error-text">{{ error_message | default: 'Something went wrong. Please try again.' }}</p>
        </div>

        {% comment %} Form {% endcomment %}
        <form class="modal-form">
          <div class="modal-form-row">
            <div class="modal-form-group">
              <label for="virtual-first-name-{{ section_id }}" class="modal-label modal-label-required">First Name</label>
              <input
                type="text"
                id="virtual-first-name-{{ section_id }}"
                name="first_name"
                class="modal-input"
                placeholder="Enter your first name"
                required
              >
            </div>
            <div class="modal-form-group">
              <label for="virtual-last-name-{{ section_id }}" class="modal-label modal-label-required">Last Name</label>
              <input
                type="text"
                id="virtual-last-name-{{ section_id }}"
                name="last_name"
                class="modal-input"
                placeholder="Enter your last name"
                required
              >
            </div>
          </div>

          <div class="modal-form-row">
            <div class="modal-form-group">
              <label for="virtual-date-{{ section_id }}" class="modal-label modal-label-required">Date</label>
              <input
                type="date"
                id="virtual-date-{{ section_id }}"
                name="date"
                class="modal-input"
                required
              >
            </div>
            <div class="modal-form-group">
              <label for="virtual-time-{{ section_id }}" class="modal-label modal-label-required">Time</label>
              <input
                type="time"
                id="virtual-time-{{ section_id }}"
                name="time"
                class="modal-input"
                step="3600"
                required
              >
            </div>
          </div>

          <div class="modal-form-group">
            <label for="virtual-message-{{ section_id }}" class="modal-label">Message</label>
            <textarea
              id="virtual-message-{{ section_id }}"
              name="message"
              class="modal-textarea"
              placeholder="Tell us about your requirements (optional)"
            ></textarea>
          </div>

          <button type="submit" class="modal-submit">Proceed to Virtual Appointment</button>
        </form>
      </div>
    </div>
  </div>

  {% comment %} Request A Callback Modal {% endcomment %}
  <div
    id="modal-callback-{{ section_id }}"
    class="modal-overlay"
  >
    <div class="modal-container">
      <div class="modal-header">
        <div class="modal-close-wrapper">
          <button type="button" class="modal-close" aria-label="Close modal">&times;</button>
        </div>
        <h3 class="modal-title">Request A Callback</h3>
      </div>
      <div class="modal-body">
        {% comment %} Error Message {% endcomment %}
        <div class="modal-error">
          <p class="modal-error-text">{{ error_message | default: 'Something went wrong. Please try again.' }}</p>
        </div>

        {% comment %} Success Message {% endcomment %}
        <div class="modal-success">
          <div class="modal-success-icon">✓</div>
          <h4 class="modal-success-title">Thank You!</h4>
          <p class="modal-success-text">{{ success_message | default: 'Thank you for your request. Our team will get back to you shortly.' }}</p>
        </div>

        {% comment %} Form {% endcomment %}
        <form class="modal-form">
          <div class="modal-form-row">
            <div class="modal-form-group">
              <label for="callback-first-name-{{ section_id }}" class="modal-label modal-label-required">First Name</label>
              <input
                type="text"
                id="callback-first-name-{{ section_id }}"
                name="first_name"
                class="modal-input"
                placeholder="Enter your first name"
                required
              >
            </div>
            <div class="modal-form-group">
              <label for="callback-last-name-{{ section_id }}" class="modal-label modal-label-required">Last Name</label>
              <input
                type="text"
                id="callback-last-name-{{ section_id }}"
                name="last_name"
                class="modal-input"
                placeholder="Enter your last name"
                required
              >
            </div>
          </div>

          <div class="modal-form-group">
            <label for="callback-email-{{ section_id }}" class="modal-label modal-label-required">Email Address</label>
            <input
              type="email"
              id="callback-email-{{ section_id }}"
              name="email"
              class="modal-input"
              placeholder="your.email@example.com"
              required
            >
          </div>

          <div class="modal-form-group phone-group">
            <div>
              <label for="callback-country-code-{{ section_id }}" class="modal-label modal-label-required">Country Code</label>
              <div class="country-code-wrapper">
                <input
                  type="text"
                  id="callback-country-code-{{ section_id }}"
                  class="modal-input country-code-input"
                  placeholder="Search country code..."
                  value="+91"
                  autocomplete="off"
                  readonly
                  onfocus="this.removeAttribute('readonly');"
                >
                <input type="hidden" name="country_code" value="+91">
                <div class="country-code-results"></div>
              </div>
            </div>
            <div>
              <label for="callback-phone-{{ section_id }}" class="modal-label modal-label-required">Phone Number</label>
              <input
                type="tel"
                id="callback-phone-{{ section_id }}"
                name="phone"
                class="modal-input"
                placeholder="123456789"
                pattern="[0-9]+"
                required
              >
            </div>
          </div>

          <div class="modal-form-row">
            <div class="modal-form-group">
              <label for="callback-date-{{ section_id }}" class="modal-label modal-label-required">Date</label>
              <input
                type="date"
                id="callback-date-{{ section_id }}"
                name="date"
                class="modal-input"
                required
              >
            </div>
            <div class="modal-form-group">
              <label for="callback-time-{{ section_id }}" class="modal-label modal-label-required">Time</label>
              <input
                type="time"
                id="callback-time-{{ section_id }}"
                name="time"
                class="modal-input"
                step="3600"
                required
              >
            </div>
          </div>

          <div class="modal-form-group">
            <label for="callback-message-{{ section_id }}" class="modal-label">Message</label>
            <textarea
              id="callback-message-{{ section_id }}"
              name="message"
              class="modal-textarea"
              placeholder="Tell us about your requirements (optional)"
            ></textarea>
          </div>

          <button type="submit" class="modal-submit">Submit Request</button>
        </form>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Two Column Image Custom",
  "class": "section-two-column-image-customiser",
  "settings": [
    {
      "type": "header",
      "content": "Content Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Your Imagination, Our Craft"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Book a virtual appointment or request a callback with our design specialists to bring your dream jewelry to life.</p>"
    },
    {
      "type": "header",
      "content": "Button 1 (Primary)"
    },
    {
      "type": "text",
      "id": "button_1_text",
      "label": "Button 1 Text",
      "default": "Virtual Appointment"
    },
    {
      "type": "url",
      "id": "button_1_link",
      "label": "Button 1 Link"
    },
    {
      "type": "header",
      "content": "Button 2 (Secondary)"
    },
    {
      "type": "text",
      "id": "button_2_text",
      "label": "Button 2 Text",
      "default": "Request A Callback"
    },
    {
      "type": "url",
      "id": "button_2_link",
      "label": "Button 2 Link"
    },
    {
      "type": "header",
      "content": "Visual Settings"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image",
      "info": "Recommended: 1440px × 1600px for desktop, will be cropped to 1:1 on mobile"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#fffaf5"
    },
    {
      "type": "header",
      "content": "Modal Settings"
    },
    {
      "type": "text",
      "id": "whatsapp_number",
      "label": "WhatsApp Number",
      "info": "Include country code (e.g., +971501234567). Used for Virtual Appointment button.",
      "default": "+971501234567"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Success Message",
      "default": "Thank you for your request. Our team will get back to you shortly."
    },
    {
      "type": "text",
      "id": "error_message",
      "label": "Error Message",
      "default": "Something went wrong. Please try again."
    }
  ],
  "presets": [
    {
      "name": "Two Column Image Customiser",
      "settings": {
        "heading": "Your Imagination, Our Craft",
        "description": "<p>Book a virtual appointment or request a callback with our design specialists to bring your dream jewelry to life. From sharing ideas to choosing the perfect diamond within your budget, we'll guide you every step of the way.</p>",
        "button_1_text": "Virtual Appointment",
        "button_2_text": "Request A Callback",
        "background_color": "#fffaf5"
      }
    }
  ]
}
{% endschema %}
